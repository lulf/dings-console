<!DOCTYPE html>
<html>
<head>
  <title>Teig Dashboard</title>
  <meta http-equiv="content-type" content="text/html;charset=utf-8" />
<script src="assets/rhea.js"></script>
</head>

<body>
<h1>Teig Dashboard</h1>
<input type="text" id="request" style="width:100%"/>

<script>
var server = "ws://127.0.0.1:8080";
var input = document.getElementById("request");
input.focus();
function append(txt) {
    var node = document.createTextNode(txt);
    var div = document.createElement("div");
    div.appendChild(node);
    document.body.insertBefore(div, input);
}

var client = require("rhea");
client.on("message", function (context) {
    console.log("Got message?");
    append(context.message.body);
});
var ws = client.websocket_connect(WebSocket);
console.log("Connecting");
var connection = client.connect({"connection_details":ws(server, ["binary", "AMQPWSB10", "amqp"]), "reconnect":false});
console.log("Opening receiver");
connection.open_receiver("events");

</script>
</body>
</html>
